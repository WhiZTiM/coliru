

clang++ ####################################################

main.cpp:33:5: warning: delete called on 'A1' that is abstract but has non-virtual destructor [-Wdelete-non-virtual-dtor]
    delete pa1;
    ^
main.cpp:42:5: warning: delete called on 'A2' that is abstract but has non-virtual destructor [-Wdelete-non-virtual-dtor]
    delete pa2;
    ^
2 warnings generated.
sizeof(A1): 8
sizeof(A2): 8
sizeof(B): 16
b: 0xe7fc20
pa1: 0xe7fc20
b: 0xe7fc20
pa2: 0xe7fc28
*** glibc detected *** ./a.out: free(): invalid pointer: 0x0000000000e7fc28 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7e846)[0x7f73bc059846]
./a.out(_ZdlPvm+0x15)[0x400e55]
./a.out[0x400dcf]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f73bbffc76d]
./a.out[0x400a55]
======= Memory map: ========
bash: line 8: 12959 Aborted                 (core dumped) ./a.out
